{"name": "新建扫描方案", "status": "failed", "statusDetails": {"message": "AssertionError: 删除扫描方案异常: Locator.click: Error: strict mode violation: locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\") resolved to 4 elements:\n    1) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案B-5242 js go js go +-\").locator(\"i\")\n    2) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"默 默认扫描方案 go java go java +-\").locator(\"i\")\n    3) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-5082 py go py go +-\").locator(\"i\")\n    4) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-8333 go py go py +-\").locator(\"i\")\n\nCall log:\n  - waiting for locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\")", "trace": ">   ???\n\nD:\\Pycharm\\PythonProjects\\Playwright\\test_cases\\test_case_code_scan_plan.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nui\\page\\code_scan_plan_creator.py:65: in delete_code_scan_plan\n    self.code_scan_plan_page.delete_plan()\nui\\page\\code_scan_plan_page.py:118: in delete_plan\n    config_filter_element.delete_config(DELETE_SCAN_PLAN, CODE_PLAN_CONFIRM_BUTTON)\nutils\\elements.py:256: in delete_config\n    self.controller.click(delete_button_xpath)\nutils\\sync_playwright_browser_controller.py:139: in click\n    self._get_element(selector, timeout).click()\nC:\\Users\\MJ\\AppData\\Roaming\\Python\\Python311\\site-packages\\playwright\\sync_api\\_generated.py:15450: in click\n    self._sync(\nC:\\Users\\MJ\\AppData\\Roaming\\Python\\Python311\\site-packages\\playwright\\_impl\\_locator.py:156: in click\n    return await self._frame.click(self._selector, strict=True, **params)\nC:\\Users\\MJ\\AppData\\Roaming\\Python\\Python311\\site-packages\\playwright\\_impl\\_frame.py:488: in click\n    await self._channel.send(\"click\", locals_to_params(locals()))\nC:\\Users\\MJ\\AppData\\Roaming\\Python\\Python311\\site-packages\\playwright\\_impl\\_connection.py:61: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <playwright._impl._connection.Connection object at 0x0000024B8E44DF50>, cb = <function Channel.send.<locals>.<lambda> at 0x0000024B8E176C00>, is_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.Error: Locator.click: Error: strict mode violation: locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\") resolved to 4 elements:\nE               1) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案B-5242 js go js go +-\").locator(\"i\")\nE               2) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"默 默认扫描方案 go java go java +-\").locator(\"i\")\nE               3) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-5082 py go py go +-\").locator(\"i\")\nE               4) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-8333 go py go py +-\").locator(\"i\")\nE           \nE           Call log:\nE             - waiting for locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\")\n\nC:\\Users\\MJ\\AppData\\Roaming\\Python\\Python311\\site-packages\\playwright\\_impl\\_connection.py:528: Error\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_case_code_scan_plan.TestCodeScanPlan object at 0x0000024BFFE56310>\ncontroller = <utils.sync_playwright_browser_controller.BrowserController object at 0x0000024B8E44C1D0>\ncode_scan_plan_creator = <ui.page.code_scan_plan_creator.CodeScanPlanCreator object at 0x0000024B8E986250>\ntest_data = {'description': '自动化创建2', 'is_default': False, 'is_del': True, 'languages': ['Go', 'JavaScript'], ...}\n\n>   ???\n\nD:\\Pycharm\\PythonProjects\\Playwright\\test_cases\\test_case_code_scan_plan.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nstep_name = '步骤6、删除扫描方案', action = <function TestCodeScanPlan.test_case_code_scan_plan.<locals>.<lambda> at 0x0000024BFFE45EE0>, error_message = '删除扫描方案异常'\ncontroller = <utils.sync_playwright_browser_controller.BrowserController object at 0x0000024B8E44C1D0>, capture_on_success = True\n\n    @staticmethod\n    def execute_step(step_name, action, error_message, controller, capture_on_success=True):\n        \"\"\"\n        执行测试步骤的通用方法\n        :param step_name: 步骤名称（用于Allure报告）\n        :param action: 要执行的操作（lambda或函数）\n        :param error_message: 错误提示信息\n        :param controller: 浏览器控制器（用于截图）\n        :param capture_on_success: 是否在出错时截图\n        \"\"\"\n        with allure.step(step_name):\n            try:\n                action()\n                # 可选：成功时截图\n                if capture_on_success:\n                    controller.capture(step=f\"{step_name} - 成功\")\n            except Exception as e:\n                logger.error(f\"{error_message}: {e}\", exc_info=True)\n                controller.capture(step=f\"{step_name} - 失败\")\n>               raise AssertionError(f\"{error_message}: {str(e)}\")\nE               AssertionError: 删除扫描方案异常: Locator.click: Error: strict mode violation: locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\") resolved to 4 elements:\nE                   1) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案B-5242 js go js go +-\").locator(\"i\")\nE                   2) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"默 默认扫描方案 go java go java +-\").locator(\"i\")\nE                   3) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-5082 py go py go +-\").locator(\"i\")\nE                   4) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-8333 go py go py +-\").locator(\"i\")\nE               \nE               Call log:\nE                 - waiting for locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\")\n\nutils\\step_utils.py:27: AssertionError"}, "description": "测试创建扫描方案", "steps": [{"name": "步骤1、登录devops", "status": "passed", "attachments": [{"name": "步骤1、登录devops - 成功", "source": "c3ce3d7c-8eec-4978-bcd8-c4d85968e8a8-attachment.png", "type": "image/png"}], "start": 1759057458182, "stop": 1759057474401}, {"name": "步骤2、导航到代码扫描 - 扫描方案", "status": "passed", "attachments": [{"name": "步骤2、导航到代码扫描 - 扫描方案 - 成功", "source": "152eb8c8-71d0-4a8f-bb37-e80dc45be84b-attachment.png", "type": "image/png"}], "start": 1759057474401, "stop": 1759057481805}, {"name": "步骤3、创建扫描方案", "status": "passed", "attachments": [{"name": "步骤3、创建扫描方案 - 成功", "source": "440f4f18-7ce8-4972-892b-ae81db44b8d5-attachment.png", "type": "image/png"}], "start": 1759057481805, "stop": 1759057492134}, {"name": "步骤4、添加过滤路径", "status": "passed", "attachments": [{"name": "步骤4、添加过滤路径 - 成功", "source": "dcdb9513-bc39-45de-8ac7-4e50cf723a75-attachment.png", "type": "image/png"}], "start": 1759057492134, "stop": 1759057493406}, {"name": "步骤5、删除过滤路径", "status": "passed", "attachments": [{"name": "步骤5、删除过滤路径 - 成功", "source": "8351dfad-05a9-4c95-9893-a1608830041c-attachment.png", "type": "image/png"}], "start": 1759057493406, "stop": 1759057494668}, {"name": "步骤6、删除扫描方案", "status": "failed", "statusDetails": {"message": "AssertionError: 删除扫描方案异常: Locator.click: Error: strict mode violation: locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\") resolved to 4 elements:\n    1) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案B-5242 js go js go +-\").locator(\"i\")\n    2) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"默 默认扫描方案 go java go java +-\").locator(\"i\")\n    3) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-5082 py go py go +-\").locator(\"i\")\n    4) <i data-v-129b3658=\"\" class=\"el-icon-delete cursor\"></i> aka locator(\"li\").filter(has_text=\"扫 扫描方案A-8333 go py go py +-\").locator(\"i\")\n\nCall log:\n  - waiting for locator(\"//*[@id='app']/div/section/div/main/div/div[1]/div[2]/ul/li/div[2]/div[1]/div[2]/i\")\n\n", "trace": "  File \"D:\\Pycharm\\PythonProjects\\Playwright\\utils\\step_utils.py\", line 27, in execute_step\n    raise AssertionError(f\"{error_message}: {str(e)}\")\n"}, "attachments": [{"name": "步骤6、删除扫描方案 - 失败", "source": "1b1d8ceb-5325-44f9-aeb9-4736c1c88526-attachment.png", "type": "image/png"}], "start": 1759057494668, "stop": 1759057498219}], "attachments": [{"name": "log", "source": "65a8c454-8493-419a-af4b-0cb183974438-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "test_data", "value": "{'tab': '扫描方案', 'plan_name': '扫描方案B-', 'description': '自动化创建2', 'languages': ['Go', 'JavaScript'], 'is_default': False, 'is_del': True}"}], "start": 1759057458181, "stop": 1759057498224, "uuid": "d81d9dfd-dec6-4fa0-8b47-5d43a0fec499", "historyId": "c5ce5c03f930048ea00f589ad5b2a73d", "testCaseId": "5e6f9462a634f6ff63d90f11052b7c4c", "fullName": "ui.test_cases.test_case_code_scan_plan.TestCodeScanPlan#test_case_code_scan_plan", "labels": [{"name": "story", "value": "扫描方案"}, {"name": "feature", "value": "代码扫描方案管理"}, {"name": "tag", "value": "code_scan_plan"}, {"name": "parentSuite", "value": "ui.test_cases"}, {"name": "suite", "value": "test_case_code_scan_plan"}, {"name": "subSuite", "value": "TestCodeScanPlan"}, {"name": "host", "value": "LAPTOP-RB42MH0U"}, {"name": "thread", "value": "30752-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "ui.test_cases.test_case_code_scan_plan"}]}